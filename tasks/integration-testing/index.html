<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.9">
<meta name="robots" content="noindex, nofollow">
<title data-react-helmet="true">Integration Testing | Software Design &amp; Testing</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://nds-swe.github.io/swdt/tasks/integration-testing"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-tasks-current"><meta data-react-helmet="true" property="og:title" content="Integration Testing | Software Design &amp; Testing"><meta data-react-helmet="true" name="description" content="|Lecture equivalent| Duration |"><meta data-react-helmet="true" property="og:description" content="|Lecture equivalent| Duration |"><link data-react-helmet="true" rel="shortcut icon" href="/swdt/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://nds-swe.github.io/swdt/tasks/integration-testing"><link data-react-helmet="true" rel="alternate" href="https://nds-swe.github.io/swdt/tasks/integration-testing" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://nds-swe.github.io/swdt/tasks/integration-testing" hreflang="x-default"><link rel="stylesheet" href="/swdt/assets/css/styles.a9443846.css">
<link rel="preload" href="/swdt/assets/js/runtime~main.8180d37e.js" as="script">
<link rel="preload" href="/swdt/assets/js/main.4a2256a2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/swdt/"><div class="navbar__logo"><img src="/swdt/img/logo.svg" alt="DevOps" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/swdt/img/logo.svg" alt="DevOps" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Software Design</b></a><a class="navbar__item navbar__link" href="/swdt/syllabus/">Syllabus</a><a class="navbar__item navbar__link" href="/swdt/docs/">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/swdt/tasks/">Tasks</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/nds-swe/swdt" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">üåú</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">üåû</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/swdt/tasks/">About</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/swdt/tasks/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/swdt/tasks/c4-exman">C4 ExMan</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/swdt/tasks/client-server">Client-Server</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/swdt/tasks/database">Database</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/swdt/tasks/github-actions">GitHub Actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/swdt/tasks/integration-testing">Integration Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/swdt/tasks/spring-starter">Spring Starter</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/swdt/tasks/strategy-pattern">Strategy Pattern</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/swdt/tasks/swagger">Swagger</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist" href="#">Bites</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/swdt/tasks/bites/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/swdt/tasks/bites/c4-model">C4 Model</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/swdt/tasks/bites/docker-compose">Docker Compose</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/swdt/tasks/bites/github-actions">GitHub Actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/swdt/tasks/bites/health-checking">Health-Checking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/swdt/tasks/bites/junit">JUnit</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/swdt/tasks/bites/logging">Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/swdt/tasks/bites/rest-assured">REST-assured</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/swdt/tasks/bites/swagger">Swagger</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/swdt/tasks/bites/telemetry">Telemetry</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">solutions</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Solutions</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Integration Testing</h1></header><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Metadata</h5></div><div class="admonition-content"><table><thead><tr><th>Lecture equivalent</th><th>Duration</th></tr></thead><tbody><tr><td>3</td><td>2h 15min</td></tr></tbody></table><p>At the end of this task, students</p><ul><li>have added one integration test (<em>IT</em>) to the spring-starter</li><li>have added a <code>docker-compose.yml</code> file</li><li>run the integration test in test containers</li><li>run a docker security scan upon every pull request</li></ul></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="add-test">Add test<a aria-hidden="true" class="hash-link" href="#add-test" title="Direct link to heading">‚Äã</a></h2><div class="admonition admonition-warning alert alert--danger"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>üßëüèΩ‚Äçüéì-advice</h5></div><div class="admonition-content"><p>This task combines literally everything you learned until now. Mastering this task requires time and the will to learn, there is no fast-lane. The result will be fascinating, mature and powerful. But if you expect that you can do this by clicking three times in a UI, you did not pay attention the previous 18 lessons.</p><p><strong>As a reward for your efforts you get a fully-automated, state-of-the-art CI pipeline using GitHub Actions!</strong></p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="refactor-employeescontroller">Refactor <code>EmployeesController</code><a aria-hidden="true" class="hash-link" href="#refactor-employeescontroller" title="Direct link to heading">‚Äã</a></h3><p>In the <a href="/swdt/tasks/spring-starter">spring-starter task</a> we created two endpoints, one seemingly secure, the other not secure.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Task</h5></div><div class="admonition-content"><p>Remove the insecure endpoint. Refactor the secure endpoint to use a layered architecture to fetch three fictional employees.
Remove also the <code>empty</code> endpoints from <a href="/swdt/tasks/architecture">architecture</a>, you also do not need them anymore.</p><p>Merge these two tasks (spring-starter and architecture) into one <code>/employees</code> endpoint!</p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="first-integration-test">First integration test<a aria-hidden="true" class="hash-link" href="#first-integration-test" title="Direct link to heading">‚Äã</a></h3><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Task</h5></div><div class="admonition-content"><p>Write your first integration test as shown below.</p></div></div><p>Create a new file: <code>EmployeeControllerTestIT.class</code> (the <em>IT</em> stands for integration test and helps to distinguish files)</p><p>Use these sources to write your first own integration test (you can also cheat, learning nothing):</p><ol><li><a href="https://rest-assured.io/" target="_blank" rel="noopener noreferrer">https://rest-assured.io/</a></li><li><a href="https://github.com/rest-assured/rest-assured/wiki/GettingStarted#rest-assured" target="_blank" rel="noopener noreferrer">https://github.com/rest-assured/rest-assured/wiki/GettingStarted#rest-assured</a></li><li><a href="https://github.com/rest-assured/rest-assured/wiki/Usage#challenged-basic-authentication" target="_blank" rel="noopener noreferrer">https://github.com/rest-assured/rest-assured/wiki/Usage#challenged-basic-authentication</a></li><li><a href="https://github.com/rest-assured/rest-assured/wiki/Usage#root-path" target="_blank" rel="noopener noreferrer">https://github.com/rest-assured/rest-assured/wiki/Usage#root-path</a> --&gt; last example</li></ol><ul><li>note <code>body(&quot;size()&quot;, equalTo(4)).</code></li></ul><p>Compose these sources into one test. Try as hard as you can, before you cheat.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="run-tests">Run tests<a aria-hidden="true" class="hash-link" href="#run-tests" title="Direct link to heading">‚Äã</a></h3><p>First, make sure that your old EmployeeTest (from <a href="/swdt/tasks/github-actions">github-actions</a>) still works. If the old test still passes, run the new test.</p><p>You will hit:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">java.net.ConnectException: Connection refused</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    at java.base/sun.nio.ch.Net.connect0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Native Method</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    at java.base/sun.nio.ch.Net.connect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Net.java:503</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    at java.base/sun.nio.ch.Net.connect</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">Net.java:492</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Why?</p><div class="admonition admonition-success alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>success</h5></div><div class="admonition-content"><p>Integration test test against a running instance! So you need your server running at the same time as the tests to succeed!</p></div></div><p>So, in IntelliJ (or the console), start the server, then run the tests (IntelliJ can handle that, yes).</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Task</h5></div><div class="admonition-content"><p>Make your tests success the first time! All of them</p><ul><li>EmployeeTest.java</li><li>EmployeeControllerTestIT.java</li></ul><p>In order for this to work properly, you might give a look at <a href="https://github.com/nds-swe/jinder/pull/7" target="_blank" rel="noopener noreferrer">JUnit 5 Test Tagging</a>.</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="interim-report">Interim report<a aria-hidden="true" class="hash-link" href="#interim-report" title="Direct link to heading">‚Äã</a></h2><p>Congrats, you have made it quite far! Now lets automate some things away!</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="automate">Automate<a aria-hidden="true" class="hash-link" href="#automate" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="create-docker-composeyml">Create <code>docker-compose.yml</code><a aria-hidden="true" class="hash-link" href="#create-docker-composeyml" title="Direct link to heading">‚Äã</a></h3><p>We have seen in the lecture and you can read up <a href="https://docs.docker.com/compose/compose-file/" target="_blank" rel="noopener noreferrer">here</a> what a <code>docker-compose.yml</code> file does.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Task</h5></div><div class="admonition-content"><p>Add a docker compose definition to your project. You can either fill it in yourself or see its content <a href="https://github.com/nds-swe/spring-starter/blob/main/docker-compose.yml" target="_blank" rel="noopener noreferrer">here</a>.</p></div></div><p>This compose file will be used by a gradle plugin to <code>up</code> and <code>down</code> your project automatically during test phase! No more manually starting the project!</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="separate-unit-and-integration-tests">Separate unit and integration tests<a aria-hidden="true" class="hash-link" href="#separate-unit-and-integration-tests" title="Direct link to heading">‚Äã</a></h3><p>Modify your gradle test task to look like so:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI gradle"><pre tabindex="0" class="prism-code language-gradle codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">test {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    useJUnitPlatform{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        includeTags &#x27;unit&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        excludeTags &#x27;IT&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    testLogging {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        events &quot;passed&quot;, &quot;skipped&quot;, &quot;failed&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>This will only run unit tests when <code>test</code> is called. Now it is time to modify our gradle file further, add the following content (there is already a <code>plugins</code> section, merge them):</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI gradle"><pre tabindex="0" class="prism-code language-gradle codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">plugins {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    id &#x27;com.avast.gradle.docker-compose&#x27; version &quot;0.14.3&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">task integrationTest(type: Test) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  dependsOn assemble</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    description = &#x27;Runs integration tests.&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    group = &#x27;verification&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    useJUnitPlatform{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            includeTags &#x27;IT&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            excludeTags &#x27;unit&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    testLogging {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            events &quot;passed&quot;, &quot;skipped&quot;, &quot;failed&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">dockerCompose.isRequiredBy(integrationTest)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>You find a full <a href="https://github.com/nds-swe/spring-starter/blob/main/build.gradle" target="_blank" rel="noopener noreferrer">example</a> here. Let us check what each line does:</p><table><thead><tr><th>Statement</th><th>Function</th></tr></thead><tbody><tr><td><code>plugins --&gt; id &#x27;com.avast.gradle.docker-compose&#x27; version &quot;0.14.3&quot;</code></td><td>Imports the gradle plugin to use docker-compose</td></tr><tr><td><code>task integrationTest(type: Test)</code></td><td>Defines a new task of type <code>Test</code> (and we want to run tests)</td></tr><tr><td><code>dependsOn assemble</code></td><td>Before we can build the <code>Dockerfile</code> (using compose), we must assemble (build without test) our application</td></tr><tr><td><code>description = &#x27;Runs integration tests.&#x27;</code></td><td>Self-explaining</td></tr><tr><td><code>group = &#x27;verification&#x27;</code></td><td>Self-explaining</td></tr><tr><td><code>useJUnitPlatform</code></td><td>Already seen in unit tests only this time we switch the include and exclude</td></tr><tr><td><code>testLogging</code></td><td>Log level, known from unit tests</td></tr><tr><td><code>dockerCompose.isRequiredBy(integrationTest)</code></td><td>Instructing gradle, that <code>dockerCompose</code> is required for <code>integrationTest</code></td></tr></tbody></table><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Task</h5></div><div class="admonition-content"><p>Add the fully-automated integration tests as described above.</p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="verification">Verification<a aria-hidden="true" class="hash-link" href="#verification" title="Direct link to heading">‚Äã</a></h3><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Task</h5></div><div class="admonition-content"><p>Run the tests locally, make sure they run. It will look something like shown below.</p></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="unit-test">Unit Test<a aria-hidden="true" class="hash-link" href="#unit-test" title="Direct link to heading">‚Äã</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">‚ùØ ./gradlew </span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Starting a Gradle Daemon, </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> stopped Daemon could not be reused, use --status </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> details</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Task :test</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">EmployeeTest </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Is too young PASSED</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">EmployeeTest </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Old enough PASSED</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">EmployeeTest </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Of exact age PASSED</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">StarterApplicationTests </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> contextLoads</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> PASSED</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BUILD SUCCESSFUL </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> 10s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">4</span><span class="token plain"> actionable tasks: </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"> executed, </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"> up-to-date</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_y2LR" id="integration-test">Integration-Test<a aria-hidden="true" class="hash-link" href="#integration-test" title="Direct link to heading">‚Äã</a></h4><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token plain">‚ùØ ./gradlew integrationTest</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Task :compileJava</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Note: /Users/i511895/SAPDevelop/abb/spring-starter/src/main/java/ch/abbts/nds/swe/swdt/starter/CustomWebSecurityConfigurerAdapter.java uses or overrides a deprecated API.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Note: Recompile with -Xlint:deprecation </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> details.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Task :composeUp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Building spring-starter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#1 [internal] load build definition from Dockerfile</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#1 sha256:e1337714ae876a631a3bf45c92f841420367f90eb30d6ef5373ed94e28a5a64e</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#1 transferring dockerfile: 243B 0.0s done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#1 DONE 0.0s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#2 [internal] load .dockerignore</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#2 sha256:32fbaf5926bedad3eaba22b0a79f92ce2d11f6f2df2a01d5052dbe2441255ebf</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#2 transferring context: 2B done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#2 DONE 0.0s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#3 [internal] load metadata for docker.io/azul/zulu-openjdk-alpine:16</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#3 sha256:ec9410ded58039807916e8fe0a299ec3a2e7197e9b0ce752e04977d6f91dfe97</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#3 ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#4 [auth] azul/zulu-openjdk-alpine:pull token for registry-1.docker.io</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#4 sha256:c704e25d5a25d2c7d3b59d36e5eeda887364ca8b5c1c6e4866fc4573ec2e7ef4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#4 DONE 0.0s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#3 [internal] load metadata for docker.io/azul/zulu-openjdk-alpine:16</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#3 sha256:ec9410ded58039807916e8fe0a299ec3a2e7197e9b0ce752e04977d6f91dfe97</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#3 DONE 1.5s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#5 [1/3] FROM docker.io/azul/zulu-openjdk-alpine:16@sha256:c7ccaaba7dfac3f2f921122a9afc857938a451f740d3c9afb53499016ce344ab</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#5 sha256:4c6ecb1d4dc6e3734acab6b473c1584d377df5560c68a0fd37bd8fcb3637e821</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#5 DONE 0.0s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#7 [internal] load build context</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#7 sha256:66222cb7c1cd63d64d2d6c03cc5be835c62af9503e3779f1348b97b70b3cc291</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#7 transferring context: 22.40MB 0.6s done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#7 DONE 0.6s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#6 [2/3] RUN addgroup -S spring &amp;&amp; adduser -S spring -G spring</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#6 sha256:cbc1aef0ebe6c25c05bb97ef259dce0878a1b5b7adc7d98c911892cc573b2b4f</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#6 CACHED</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#8 [3/3] COPY build/libs/*T.jar app.jar</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#8 sha256:41507ef1965217d13258fab725d0c5ea680134611cff7125f3d7562e1227f9cc</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#8 DONE 0.1s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#9 exporting to image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#9 sha256:e8c613e07b0b7ff33893b694f7759a10d42e180f2b4dc349fb57dc6b71dcab00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#9 exporting layers 0.1s done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#9 writing image sha256:a185e2bafb07a0d69fcb64b4b07cd5d5d7b775358b7e61f4929e1ff9109e7857 done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#9 naming to docker.io/library/ab4f8ff4365c3530a6e3290494e6ed02_starter__spring-starter done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">#9 DONE 0.1s</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Creating network </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;ab4f8ff4365c3530a6e3290494e6ed02_starter__default&quot;</span><span class="token plain"> with the default driver</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Creating ab4f8ff4365c3530a6e3290494e6ed02_starter__spring-starter_1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Creating ab4f8ff4365c3530a6e3290494e6ed02_starter__spring-starter_1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Docker Compose is now </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> the Docker CLI, try </span><span class="token variable" style="color:rgb(191, 199, 213)">`</span><span class="token variable" style="color:rgb(191, 199, 213)">docker compose up</span><span class="token variable" style="color:rgb(191, 199, 213)">`</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Will use localhost as </span><span class="token function" style="color:rgb(130, 170, 255)">host</span><span class="token plain"> of spring-starter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">More forwarded TCP ports </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">service</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;spring-starter:8080 [[HostIp:0.0.0.0, HostPort:8080], [HostIp:::, HostPort:8080]]&#x27;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"> Will use the first one.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Probing TCP socket on localhost:8080 of </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;spring-starter_1&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Waiting </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> TCP socket on localhost:8080 of </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;spring-starter_1&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">TCP connection on localhost:8080 of </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;spring-starter_1&#x27;</span><span class="token plain"> was disconnected right after connected</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Will use localhost as </span><span class="token function" style="color:rgb(130, 170, 255)">host</span><span class="token plain"> of spring-starter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">More forwarded TCP ports </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">service</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;spring-starter:8080 [[HostIp:0.0.0.0, HostPort:8080], [HostIp:::, HostPort:8080]]&#x27;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"> Will use the first one.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Waiting </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> TCP socket on localhost:8080 of </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;spring-starter_1&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">TCP connection on localhost:8080 of </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;spring-starter_1&#x27;</span><span class="token plain"> was disconnected right after connected</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Will use localhost as </span><span class="token function" style="color:rgb(130, 170, 255)">host</span><span class="token plain"> of spring-starter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">More forwarded TCP ports </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">service</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;spring-starter:8080 [[HostIp:0.0.0.0, HostPort:8080], [HostIp:::, HostPort:8080]]&#x27;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"> Will use the first one.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Waiting </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> TCP socket on localhost:8080 of </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;spring-starter_1&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">TCP connection on localhost:8080 of </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;spring-starter_1&#x27;</span><span class="token plain"> was disconnected right after connected</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Will use localhost as </span><span class="token function" style="color:rgb(130, 170, 255)">host</span><span class="token plain"> of spring-starter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">More forwarded TCP ports </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">service</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;spring-starter:8080 [[HostIp:0.0.0.0, HostPort:8080], [HostIp:::, HostPort:8080]]&#x27;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"> Will use the first one.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Waiting </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> TCP socket on localhost:8080 of </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;spring-starter_1&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">TCP connection on localhost:8080 of </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;spring-starter_1&#x27;</span><span class="token plain"> was disconnected right after connected</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Will use localhost as </span><span class="token function" style="color:rgb(130, 170, 255)">host</span><span class="token plain"> of spring-starter</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">More forwarded TCP ports </span><span class="token keyword" style="font-style:italic">for</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">service</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;spring-starter:8080 [[HostIp:0.0.0.0, HostPort:8080], [HostIp:::, HostPort:8080]]&#x27;</span><span class="token builtin class-name" style="color:rgb(255, 203, 107)">.</span><span class="token plain"> Will use the first one.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">TCP socket on localhost:8080 of </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;spring-starter_1&#x27;</span><span class="token plain"> is ready</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">+------------------+----------------+----------------+</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> Name             </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> Container Port </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> Mapping        </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">+------------------+----------------+----------------+</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> spring-starter_1 </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8080</span><span class="token plain">           </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"> localhost:8080 </span><span class="token operator" style="color:rgb(137, 221, 255)">|</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">+------------------+----------------+----------------+</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Task :integrationTest</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">EmployeeControllerTestIT </span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> /employees/ returns </span><span class="token number" style="color:rgb(247, 140, 108)">200</span><span class="token plain"> and a </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"> employees PASSED</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> Task :composeDown</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Stopping ab4f8ff4365c3530a6e3290494e6ed02_starter__spring-starter_1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Stopping ab4f8ff4365c3530a6e3290494e6ed02_starter__spring-starter_1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Removing ab4f8ff4365c3530a6e3290494e6ed02_starter__spring-starter_1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Removing ab4f8ff4365c3530a6e3290494e6ed02_starter__spring-starter_1 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">..</span><span class="token plain">. </span><span class="token keyword" style="font-style:italic">done</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Removing network ab4f8ff4365c3530a6e3290494e6ed02_starter__default</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">BUILD SUCCESSFUL </span><span class="token keyword" style="font-style:italic">in</span><span class="token plain"> 33s</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token number" style="color:rgb(247, 140, 108)">9</span><span class="token plain"> actionable tasks: </span><span class="token number" style="color:rgb(247, 140, 108)">9</span><span class="token plain"> executed</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Observe what happens above:</p><ol><li>Docker Compose <code>ups</code> (starts) your backend</li><li>JUnit runs your integration tests against the new container</li><li>Docker Compose turns your container off</li></ol><div class="admonition admonition-success alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>F<strong>*</strong> amazing</h5></div><div class="admonition-content"><p>You literally mastered the most difficult part of our lecture üéâüçªü•Ç This technology is so fascinating!</p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="automate-integration-testing-away">Automate integration testing away<a aria-hidden="true" class="hash-link" href="#automate-integration-testing-away" title="Direct link to heading">‚Äã</a></h3><p>You know what is missing don&#x27;t you... Automate the test running away!</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Task</h5></div><div class="admonition-content"><p>Change your GitHub Action Workflow. Make it run both tests in two different <code>jobs</code> (it can do that know thanks to your work before!).</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="scanning-our-container">Scanning our container<a aria-hidden="true" class="hash-link" href="#scanning-our-container" title="Direct link to heading">‚Äã</a></h2><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>Task</h5></div><div class="admonition-content"><p>You learned in Lesson 6 how container scanning works. You have attended multiple lessons that run GitHub Actions. Setup another workflow, that runs every sunday night and upon every Pull Request and scans your docker image for vulnerabilities.</p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="scan-your-container">Scan your container<a aria-hidden="true" class="hash-link" href="#scan-your-container" title="Direct link to heading">‚Äã</a></h3><p>First, scan your container, you will find a ton of vulnerabilities. Switch the base image to <code>azul/zulu-openjdk-alpine:16</code> to get rid of most of them.</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="add-the-workflow">Add the workflow<a aria-hidden="true" class="hash-link" href="#add-the-workflow" title="Direct link to heading">‚Äã</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI yml"><pre tabindex="0" class="prism-code language-yml codeBlock_rtdJ thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Container Scan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">on</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">schedule</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">cron</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;0 2 * * 0&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">pull_request</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">branches</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> main</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token key atrule">jobs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">scan</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">runs-on</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">steps</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> actions/checkout@v2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> actions/setup</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">java@v1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">with</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">java-version</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">11</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">run</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ./gradlew build</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Build application</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">run</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> docker build . </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">t ndshfswe.azurecr.io/spring</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">starter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> github.sha </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Build docker image</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">uses</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Azure/container</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">scan@v0</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> Scan docker image</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">with</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">severity-threshold</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> MEDIUM</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">image-name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ndshfswe.azurecr.io/spring</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">starter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">$</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> github.sha </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Add this point in time, I do expect that you can teach yourself what this file does. Only one point is to note.</p><p>We use <code>Azure/container-scan</code> instead of Snyk because it does not require any token or API and runs locally on our ubuntu runner.</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="sample">Sample<a aria-hidden="true" class="hash-link" href="#sample" title="Direct link to heading">‚Äã</a></h2><p><a href="https://github.com/nds-swe/spring-starter/tree/0.1.9" target="_blank" rel="noopener noreferrer">Here we go</a>.</p><p>Note that at the point of writing (28th May 2021) one CVE (CVE-2021-31535) even in the latest Java image. We must await a fix - check the logs here to <a href="https://github.com/nds-swe/spring-starter/runs/2704432132?check_suite_focus=true" target="_blank" rel="noopener noreferrer">see the scans failing</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/nds-swe/swdt/edit/main/tasks/integration-testing.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-04-08T08:43:09.000Z">4/8/2022</time></b> by <b>dependabot[bot]</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/swdt/tasks/github-actions"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ <!-- -->GitHub Actions</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/swdt/tasks/spring-starter"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Spring Starter<!-- --> ¬ª</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#add-test" class="table-of-contents__link toc-highlight">Add test</a><ul><li><a href="#refactor-employeescontroller" class="table-of-contents__link toc-highlight">Refactor <code>EmployeesController</code></a></li><li><a href="#first-integration-test" class="table-of-contents__link toc-highlight">First integration test</a></li><li><a href="#run-tests" class="table-of-contents__link toc-highlight">Run tests</a></li></ul></li><li><a href="#interim-report" class="table-of-contents__link toc-highlight">Interim report</a></li><li><a href="#automate" class="table-of-contents__link toc-highlight">Automate</a><ul><li><a href="#create-docker-composeyml" class="table-of-contents__link toc-highlight">Create <code>docker-compose.yml</code></a></li><li><a href="#separate-unit-and-integration-tests" class="table-of-contents__link toc-highlight">Separate unit and integration tests</a></li><li><a href="#verification" class="table-of-contents__link toc-highlight">Verification</a></li><li><a href="#automate-integration-testing-away" class="table-of-contents__link toc-highlight">Automate integration testing away</a></li></ul></li><li><a href="#scanning-our-container" class="table-of-contents__link toc-highlight">Scanning our container</a><ul><li><a href="#scan-your-container" class="table-of-contents__link toc-highlight">Scan your container</a></li><li><a href="#add-the-workflow" class="table-of-contents__link toc-highlight">Add the workflow</a></li></ul></li><li><a href="#sample" class="table-of-contents__link toc-highlight">Sample</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/swdt/docs/">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/nds-swe/swdt/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discussions<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/nds-swe/swdt/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Issues<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://teams.microsoft.com/l/channel/19%3af545079c53aa47d0b82ccf7bae1d5a75%40thread.tacv2/Community?groupId=d794a7f5-3cc1-421a-834b-ce19702ac37f&amp;tenantId=1bef538c-eab8-4b8e-94a7-1c6353044cd6" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Teams üîê<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Docusaurus ü¶ñ<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 Dominik Meyer. Built with Docusaurus.</div></div></div></footer></div>
<script src="/swdt/assets/js/runtime~main.8180d37e.js"></script>
<script src="/swdt/assets/js/main.4a2256a2.js"></script>
</body>
</html>